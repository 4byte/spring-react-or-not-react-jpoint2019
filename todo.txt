┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃letter-grabber-producer...........14.23  [#####          ]  ┃
┃letter-signature-consumer.........14.10  [#####          ]  ┃
┃guard-consumer.....................0.00  [##]               ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

1. [v] пририсовать буферы на console-dashboard
2. [v] guard который дропает реквесты
3. начать переписывать с spring-react (webflux + tcp backpressure)
    1. Напороться на doNext
    2. Переписать на subscriber
    3. Напороться
    4. Показать траблу с Generic <> на сложном стриме с lift и проблемой вывода типа
4. сдедать свою реализацию Observable с request(n) таким же как на шаге 2
5. переписать реализацию на честный backpressure c RSocket

     --- b
a ---|
     --- c

6. Reactor - Netty просит по 32 элемента. У него своц BP между "нетворком" и "клиентом"
6.5 (Олег) Почему тогда при добавлении onBPBuffer(256) начинает просить MAX_LONG а не 32 или 256?
7. reactor-extra и более адекватный backoff стратегия

8. RSocket — resumability показать

9. в спринге RSocket support будет в 5.2. можно будет на одном порту держать и webflux, и rsocket
10. [завтра в гостишке] Нарисовать картинку взаимодействия source->webclient->netty->extservice
11. RSocket reconnect
12. srv1 -> srv2 -> srv3
    --|-------|------|--
13. Сказать про то для чего нужен webflux. Что реактивность зависит от протокола
    Вопрсоы: В каких кейсах вообще стоит использовать webflux
             Есть ли смысл в демо webflux приделывать третий сервис, может ли это потенциально показать какой то профит
             очередь backpressure и когда случается request(n). Как спрогнозировать и нарисовать модель на слайд людям 2/3 от prefetch
             Что если в webflux делать .then как в rsocket? Есть ли смысл
    Ответы:  Меньше жрёт тредов. В нашем примере никакого бенефитов. Жертвуем Latency и экономим бабки. Но есть способы митигировать это
             Webflux стоит юзать когда много нетворка, мало бизнес логики или она лёгкая. – сприноговый gateway как раз на project reactor
             Стриминг – просто удобный API
             Кейсы когда нужно минимум ресурсов юзать, говорят меньше ресурсов пожирает. Ссылочку на книжку с этой инфой


15. Семантически эквивалентны
                .parallel(letterProcessorExecutor.getMaximumPoolSize() + 1)
                .runOn(Schedulers.fromExecutor(letterProcessorExecutor))
                .sequential()
и
                .flatMap(
                        letter -> Mono.fromCallable(() -> decoder.decode(letter))
                                .subscribeOn(Schedulers.fromExecutor(letterProcessorExecutor)),
                        letterProcessorExecutor.getMaximumPoolSize())
Но технически есть разница. Но тонкая :)
16. дропы с prefetch 1 почему то
17? Вставить ссылку на реактивный хардкор олега
18. Почему то остановилось общение при добавлении limitRate(8) в big-brother
19. onBackpressureLatest() — как себя ведёт

Lifecycle reactive stream (reactive hardcore greach)
1. assembly. Собирается pipeline
2. передаётся то что в subscribe. Он "всплывает" до паблишера.
3. Паблишер передаёт подписку. Т.е сабскрайбер передаёт себя в паблишер а паблишер ему передаёт subscription



148 [letter-4] INFO  | onNext(Letter(content=You're like Hitler, except...Hitler cared about Germany, or something., signature=1100100010011101100100000110011, location=Pawn Shop Planet, _original=Summer Smith))
20149 [letter-4] INFO  | request(2)
20156 [letter-4] INFO  | request(2)
20158 [reactor-http-nio-3] INFO  | onNext(Letter(content=WUBBA LUBBA DUB DUBS!!!, signature=10010010000100101110001010000001, location=Dimension C-132, _original=Jessica))
20158 [reactor-http-nio-3] INFO  | onNext(Letter(content=Existence is pain to a meeseeks Jerry, and we will do anything to alleviate that pain., signature=10101010000101101100110110111111, location=Alphabetrium, _original=Mr. Needful))
20162 [letter-4] INFO  | onNext(Letter(content=Hello Jerry, come to rub my face in urine again?, signature=11100001110011001110000000111101, location=Gazorpazorp, _original=Krombopulos Michael))
20162 [letter-4] INFO  | onNext(Letter(content=Ohh yea, you gotta get schwifty., signature=1100001111001111010001101110, location=Cronenberg World, _original=Scary Terry))
20183 [letter-7] INFO  | requ

почему то исполняются на http-nio тредах

разница между cancel и onComplete ивентах. КОгда соединения закрываются
